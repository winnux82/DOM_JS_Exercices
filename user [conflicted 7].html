<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<h1 id="name">Hello</h1>
<button id="promptButton" type="button" class="btn btn-primary">prompt</button>
<button id="addUser" type="button" class="btn btn-primary" title="Ajouter">Ajouter un utilisateur</button>
<br>
<br>
<table id="table" class="table" style="width: 100%;border:1px solid #000">
    <tr>
        <th>firstName</th>
        <th>lastName</th>
        <th>birthday</th>
        <th>action</th>
    </tr>
    <tbody>
        <script type="text/javascript">
            let users = [{
                firstname: 'John',
                lastname: 'Doe',
                birthdate: '2015-07-01'
            }, {
                firstname: 'Bob',
                lastname: 'Maurice',
                birthdate: '2000-07-01'
            }, {
                firstname: 'Maurice',
                lastname: 'Roger',
                birthdate: '1988-07-01'
            }, {
                firstname: 'Sylvain',
                lastname: 'Bernard',
                birthdate: '1900-07-01'
            }, ];

            let i = 0;
            const tbody = document.querySelector("table tbody");

            document.getElementById("addUser").addEventListener("mouseover", function() {
                console.log("hello world");
            })
            document.getElementById("addUser").addEventListener("click", function() {
                if (users[i] == null) {
                    return;
                }
                const u = users[i];
                tbody.innerHTML += `
                <tr id="tr-${i}">
                    <td>${u.firstname}</td>
                    <td>${u.lastname}</td>
                    <td>${u.birthdate}</td>
                    <td><button type="button" onclick="remove(this)" class="btnSup btn btn-danger">Supprimer</button></td>
                </tr>
                `;
                //<td><button type="button" onclick="suppTr(${i})" class="btn btn-danger">Supprimer</button></td>
                i++;
            })


            function sauver() {


                let firstname = document.querySelector('input#firstname').value;
                let lastname = document.querySelector('input#lastname').value;
                let birthday = document.querySelector('input#birthday').value;
                if (firstname != "" || lastname != "" || birthday != "") {
                    users.push({
                        firstname: firstname,
                        lastname: lastname,
                        birthdate: birthday
                    });

                    document.querySelector('input#firstname').value = "";
                    document.querySelector('input#lastname').value = "";
                    document.querySelector('input#birthday').value = "";
                    document.getElementById("addUser").click();
                } else(alert("Veuillez remplir les champs"))


            }

            function remove(button) {
                var confirmation = confirm("Êtes vous sûr?")
                if (confirmation)
                    button.parentElement.parentElement.remove();
            }

            function suppTr(id) {
                let table = document.querySelector('table');
                table.deleteRow(id);
            }

            function toutsupprimer() {
                console.log("coucou");

            }

            document.getElementById("promptButton").addEventListener("click", () => {
                    const name = prompt('Quel est votre nom?');
                    if (name == "") {
                        return;
                    }
                    const h1value = name;
                    document.getElementById("name").innerHTML = "Bonjour " + name;

                })
                /*
                document.getElementById("alldelete").addEventListener("click", () => {
                    var monTableau = document.getElementById("table");
                    var rowCount = monTableau.rows.length;
                    for (var x = rowCount - 1; x > 0; x--) {
                        monTableau.deleteRow(x);
                        //on reset i pour pouvoir remplir à nouveau le tableau
                        i = 0;
                    }
                });*/

            document.getElementById("promptButton88").addEventListener("mouseover", () => {
                console.log("coucou")
            })


            Array.from(document.getElementsByClassName('btnSup')).forEach((btn) => {
                btn.addEventListener('click', () => console.log('yo'));
            });
        </script>
    </tbody>
</table>
<button id="alldelete" type="button" class="btn btn-danger">alldelete</button>
<button id="promptButton88" type="button" class="btn btn-primary">prompt88</button>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
<div class="container">
    <div class="panel panel-primary">
        <div class="panel-body">
            <h3 class="text-on-pannel text-primary"><strong class="text-uppercase"> Ajouter dans le tableau </strong>
            </h3>
            <tr></tr>
            <td>Firstname : </td>
            <tr>
                <td><input type="text" id="firstname" placeholder="firstname"></input>
                </td>
            </tr>
            <tr>
                <td>Lastname : </td>

                <td><input type="text" id="lastname" placeholder="lastname"></input>
                </td>
            </tr>
            <tr>
                <td>birthdate : </td>
                <td><input type="date" id="birthday" placeholder="birthday"></input>
                </td>
            </tr>
            <tr>
                <td></td>
                <td><button type="button" id="Sauver" class="btn btn-danger" onclick="sauver()">Sauver</button></td>
            </tr>
        </div>
    </div>
</div>

</form>
</body>

</html>